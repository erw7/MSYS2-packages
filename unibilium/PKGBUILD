# Maintainer: erw7 <erw7.github@gmail.com>

pkgname=unibilium
pkgver=v2.1.1.r0.g444e4f3
pkgrel=1
pkgdesc='A terminfo parsing library'
arch=('i686' 'x86_64')
license=('LGPL3')
url='https://github.com/mauke/unibilium/'
source=(git+https://github.com/neovim/${pkgname}#branch=master)
md5sums=('SKIP')

pkgver() {
  cd ${pkgname}
  git describe --long --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
}

prepare() {
  cd ${pkgname}
}

build() {
  cd ${pkgname}
  LDFLAGS="${LDFLAGS} -no-undefined" make PREFIX=/usr \
       POD2MAN=/usr/bin/core_perl/pod2man \
       TERMINFO_DIRS="\"$(ncursesw6-config --terminfo-dirs)\""
}

package() {
  cd ${pkgname}
  make DESTDIR=${pkgdir} PREFIX=/usr install
}
